<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Amazon JP eSIM Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="noise"></div>
  <main class="layout">
    <header class="hero">
      <div>
        <p class="kicker">AMAZON JP eSIM INSIGHT</p>
        <h1>수집 결과 대시보드</h1>
        <p id="metaText" class="meta">데이터를 불러오는 중...</p>
      </div>
      <button id="refreshBtn" class="btn">새로고침</button>
    </header>

    <section id="kpis" class="kpis"></section>

    <section class="card">
      <div class="cardHead">
        <h2>필터</h2>
        <span class="subtle">필터 변경 시 즉시 반영됩니다.</span>
      </div>
      <div class="toolbar">
        <label class="field field--search">
          <span>상품명/셀러/브랜드</span>
          <input id="searchInput" type="text" placeholder="키워드 입력" />
        </label>
        <label class="field">
          <span>네트워크</span>
          <select id="networkFilter"><option value="">전체</option></select>
        </label>
        <label class="field">
          <span>데이터</span>
          <select id="dataFilter"><option value="">전체</option></select>
        </label>
        <label class="field">
          <span>사용기간</span>
          <select id="usageFilter"><option value="">전체</option></select>
        </label>
        <label class="field">
          <span>활성화기한</span>
          <select id="activationFilter"><option value="">전체</option></select>
        </label>
        <label class="field">
          <span>한국 통신사</span>
          <select id="carrierFilter">
            <option value="">전체</option>
            <option value="any">통신사 명시 상품</option>
            <option value="skt">SKT 지원</option>
            <option value="kt">KT 지원</option>
            <option value="lgu">LGU+ 지원</option>
          </select>
        </label>
        <label class="field">
          <span>최소 가격 (JPY)</span>
          <input id="minPrice" type="number" min="0" step="1" placeholder="0" />
        </label>
        <label class="field">
          <span>최대 가격 (JPY)</span>
          <input id="maxPrice" type="number" min="0" step="1" placeholder="예: 5000" />
        </label>
        <label class="field">
          <span>정렬</span>
          <select id="sortKey">
            <option value="priceAsc">가격 낮은 순</option>
            <option value="priceDesc">가격 높은 순</option>
            <option value="usageAsc">사용기간 짧은 순</option>
          </select>
        </label>
      </div>
    </section>

    <section class="grid">
      <article class="card">
        <h2>데이터 용량 분포</h2>
        <div id="dataAmountBars" class="bars"></div>
      </article>
      <article class="card">
        <h2>네트워크 비율</h2>
        <div id="networkBars" class="bars"></div>
      </article>
      <article class="card">
        <h2>활성화 기한 분포</h2>
        <div id="activationBars" class="bars"></div>
      </article>
    </section>

    <section class="card">
      <div class="detailHead">
        <h2>상세 목록</h2>
        <button id="downloadExcelBtn" class="btn ghost">CSV 다운로드</button>
      </div>
      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>상품명</th>
              <th>가격 (JPY)</th>
              <th>네트워크</th>
              <th>데이터</th>
              <th>사용기간</th>
              <th>활성화기한</th>
              <th>통신사 지원</th>
              <th>셀러</th>
              <th>브랜드</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
      <div class="pagination">
        <button id="prevPage" class="btn ghost">이전</button>
        <span id="pageInfo"></span>
        <button id="nextPage" class="btn ghost">다음</button>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="/app.js"></script>
</body>
</html>
